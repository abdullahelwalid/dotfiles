#!/usr/bin/env bash

if [ "$FIREBASE_APP_NAME" = "" ]; then
  echo "error: FIREBASE_APP_NAME environment variable not set (run firebase-envrc)"
  exit 1
fi

if [ "$FIREBASE_APP_URL" = "" ]; then
  echo "error: FIREBASE_APP_URL environment variable not set (run firebase-envrc)"
  exit 1
fi

if [ ! -f firebase.json ]; then
  echo "error: firebase.json not found"
  exit 1
fi

if [ ! $(which firebase) ]; then
  echo "error: firebase command not found (run npm -g install firebase)"
  exit 1
fi

firebase deploy || exit 1

echo "# https://${FIREBASE_APP_NAME}.firebaseio.com/"
echo "# ${FIREBASE_APP_URL}"

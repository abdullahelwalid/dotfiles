#!/usr/bin/env bash

TSCONFIG_JSON="tsconfig.json"
ESLINTRC_JSON=".eslintrc.json"

if [ -f $TSCONFIG_JSON ]; then
  echo "error: $TSCONFIG_JSON already exists, aborting"
  exit 1
fi

if [ -f $ESLINTRC_JSON ]; then
  echo "error: $ESLINTRC_JSON already exists, aborting"
  exit 1
fi

if [ ! $(which tsc) ]; then
  echo "error: tsc is not installed (see https://www.typescriptlang.org/#download-links)"
  exit 1
fi  

cat << TSCONFIG_JSON_END > $TSCONFIG_JSON
{
  "compilerOptions": {
    "module": "commonjs",
    "target": "es6",
    "noImplicitAny": false,
    "sourceMap": false,
    "moduleResolution": "node"
  },
  "exclude": [
    "node_modules",
    "typings"
  ]
}
TSCONFIG_JSON_END

# Configure eslint to not complain about tsc's .js files
cat << ESLINTRC_JSON_END > $ESLINTRC_JSON
{
  "installedESLint": true,
  "env": {
    "es6": true
  }
}
ESLINTRC_JSON_END

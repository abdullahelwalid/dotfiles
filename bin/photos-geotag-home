#!/usr/bin/env bash

EXIFTOOL=exiftool

if [ $# -eq 0 ]; then
  echo "usage: $(basename "$0") dir [+-hh:mm:ss] # delta = computer_t - photo_t, see http://bit.ly/2wkvvhF"
  exit 1
fi  

if ! which -s "$EXIFTOOL" ; then
  echo "error: [$EXIFTOOL] not found"
  exit 1
fi

if test -z "$GPSLATITUDE_HOME" ; then
  echo "error: [GPSLATITUDE_HOME] not set"
  exit 1
fi

exiftool -overwrite_original -gpslongitude=$GPSLONGITUDE_HOME -gpslongituderef=$GPSLONGITUDEREF_HOME -gpslatitude=$GPSLATITUDE_HOME -gpslatituderef=$GPSLATITUDEREF_HOME "$1"
